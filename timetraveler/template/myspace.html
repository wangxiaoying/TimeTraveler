{% extends "base.html" %}

{% block css %}

<link rel="stylesheet" type="text/css" href="/media/resources/css/myspace.css">

{% endblock %}

{% block js %}
<script type="text/javascript" src="/media/resources/js/myspace.js"></script>
{% endblock %}

{% block content %}
<div class="row">
	<div class="col-md-2 col-md-offset-1">
		<a href="#" style="width:50px, height:50px">
			{% if user.userprofile.portrait %}
			<img src="/media/{{ user.userprofile.portrait.url }}" alt="..." class="img-rounded"/>
			{% else %}
			<img src="/media/photos/portrait/avatar.jpg" alt="..." class="img-rounded"/>
			{% endif %}
		</a>
		<div class="caption" style="text-align:center">
			<h4>{{ user.username }}</h4>
			<p>个性签名：{{ profile.signature }}<p>
				<!-- <p>
					<a href="#">共发布: {{ events|length }}</a>
					<a href="#">正在关注: {{ heros|length }}</a>
					<a href="#">关注者: {{ fans|length }}</a>
				</p> -->
			</div>
		</div>
		<div class="col-md-7 col-md-offset-1">
			<div class="panel panel-default">
				<div class="panel-body">
					<form role="form" method="POST" enctype="multipart/form-data" action="/event/create">
						{% csrf_token %}
						<div class="form-group">
							<textarea name="text" class="form-control" rows="3" placeholder="我的新鲜事~" require="true"></textarea>
						</div>
						<div class="row">
							<div class="col-md-6">
								<span class="file-input btn btn-info btn-file">
									选取图片 <input type="file" name="images">
									<span></span>
								</span>
							</div>
							<div class="col-md-6">
								<button type="submit" class="btn btn-default btn-primary pull-right">发布</button></br>
							</div>
						</div>
					</form>
				</div>
			</div>


			{% if news %}
			{% for n in news %}
			<div class="list-group">
				<div class="list-group-item">
					<div class="row">
						<div class="col-md-1">
							{% if n.event.user.userprofile.portrait %}
							<img src="/media/{{ n.event.user.userprofile.portrait.url}}" class="img-rounded" style="width:50px; height=50px" alt="..."/>
							{% else %}
							<img src="/media/photos/portrait/avatar.jpg" class="img-rounded" style="width:50px; height=50px" alt="..."/>
							{% endif %}
						</div>
						<div class="col-md-11">
							<a href="#" style="padding-left:10px">{{ n.event.user.username }}</a>
							{{ n.event.date|date:"Y-m-d"}}
						</div>
					</div>
					<h5>{{ n.event.text }}</h5>
				</div>
				<div class="list-group-item">
					<img src="/media/{{ n.event.image_1.url}}" style="width:450px; height=450px" alt="..."/>
				</div>

				<div id="comment-list-{{ n.event.id }}" class="list-group-item" style="display:{% if n.comments %}block{% else %} none {% endif %}">
					{% for c in n.comments %}
					<hr/>
					<div class="row">
						<div class="col-md-1">
							{% if c.user.userprofile.portrait %}
							<img src="/media/{{ c.user.userprofile.portrait.url }}" alt="..." class="img-rounded" style="width:40px; height=40px"/>
							{% else %}
							<img src="/media/photos/portrait/avatar.jpg" alt="..." class="img-rounded" style="width:40px; height=40px"/>
							{% endif %}
						</div>
						<div class="col-md-11">
							<a href="#" style="padding-left:10px">{{ c.user.username }}</a>
							<span style"padding-left:10px">{{ c.date|date:"Y-m-d"}}</span>
							<p style="padding-left: 10px">{{ c.comment }}</p>
						</div>
					</div>
					{% endfor %}
				</div>
				<div class="list-group-item">
					<div class="form-group">
						<textarea id="comment-{{ n.event.id }}" name="comment" class="form-control" rows="1" placeholder="我的评论~" require="true"></textarea>
					</div>
					<div class="form-group">
						<button id="do-comment" type="submit" class="btn btn-default btn-primary" onclick="do_comment({{ n.event.id }})">评论</button></br>
					</div>
				</div>
			</div>
			{% endfor %}
			{% else %}
			<h3>没有任何新鲜事</h3>
			{% endif %}

		</div>
	</div>

	{% endblock %}